[debug] [2025-06-30T08:20:21.221Z] ----------------------------------------------------------------------
[debug] [2025-06-30T08:20:21.224Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-06-30T08:20:21.225Z] CLI Version:   14.9.0
[debug] [2025-06-30T08:20:21.225Z] Platform:      win32
[debug] [2025-06-30T08:20:21.225Z] Node Version:  v22.17.0
[debug] [2025-06-30T08:20:21.225Z] Time:          Mon Jun 30 2025 09:20:21 GMT+0100 (British Summer Time)
[debug] [2025-06-30T08:20:21.225Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-06-30T08:20:21.424Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-06-30T08:20:21.424Z] > authorizing via signed-in user (hello@yourpayroll.info)
[debug] [2025-06-30T08:20:21.425Z] [iam] checking project payroll-skills-platform for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-06-30T08:20:21.426Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:21.426Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:21.426Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions [none]
[debug] [2025-06-30T08:20:21.426Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions x-goog-quota-user=projects/payroll-skills-platform
[debug] [2025-06-30T08:20:21.427Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-06-30T08:20:22.352Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions 200
[debug] [2025-06-30T08:20:22.352Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-06-30T08:20:22.352Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:22.352Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:22.352Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-06-30T08:20:22.352Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-06-30T08:20:23.119Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-06-30T08:20:23.119Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'payroll-skills-platform'...
[info] 
[info] i  deploying functions 
[debug] [2025-06-30T08:20:23.123Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:23.123Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:23.124Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform [none]
[debug] [2025-06-30T08:20:23.429Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform 200
[debug] [2025-06-30T08:20:23.429Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform {"projectNumber":"373583398443","projectId":"payroll-skills-platform","lifecycleState":"ACTIVE","name":"payroll-skills-platform","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-06-29T08:15:30.773984Z","parent":{"type":"organization","id":"1097197121616"}}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-06-30T08:20:23.434Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:23.434Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:23.434Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/payroll-skills-platform/adminSdkConfig [none]
[debug] [2025-06-30T08:20:24.043Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/payroll-skills-platform/adminSdkConfig 200
[debug] [2025-06-30T08:20:24.043Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/payroll-skills-platform/adminSdkConfig {"projectId":"payroll-skills-platform","storageBucket":"payroll-skills-platform.firebasestorage.app"}
[debug] [2025-06-30T08:20:24.044Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:24.044Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:24.045Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs [none]
[debug] [2025-06-30T08:20:24.439Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs 200
[debug] [2025-06-30T08:20:24.439Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs {"configs":[{"name":"projects/payroll-skills-platform/configs/gemini"}]}
[debug] [2025-06-30T08:20:24.439Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:24.439Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:24.440Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables [none]
[debug] [2025-06-30T08:20:24.650Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables 200
[debug] [2025-06-30T08:20:24.650Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables {"variables":[{"name":"projects/payroll-skills-platform/configs/gemini/variables/key","updateTime":"2025-06-30T08:00:41.435880940Z"}]}
[debug] [2025-06-30T08:20:24.650Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:24.650Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:24.650Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables/key [none]
[debug] [2025-06-30T08:20:24.962Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables/key 200
[debug] [2025-06-30T08:20:24.962Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables/key {"name":"projects/payroll-skills-platform/configs/gemini/variables/key","updateTime":"2025-06-30T08:00:41.435880940Z","text":"AIzaSyAas-F3EfJXljJKEERoQ2vQVt-XVDNLc70"}
[debug] [2025-06-30T08:20:24.964Z] Validating nodejs source
[debug] [2025-06-30T08:20:25.884Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1"
  },
  "devDependencies": {
    "@types/node-fetch": "^2.6.12",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^5.7.3"
  },
  "private": true
}
[debug] [2025-06-30T08:20:25.884Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-06-30T08:20:25.886Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-06-30T08:20:25.895Z] Found firebase-functions binary at 'C:\Users\kevin\Desktop\payroll-skills-app\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8710

[debug] [2025-06-30T08:20:26.719Z] Got response from /__/functions.yaml {"endpoints":{"callGemini":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"callGemini"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-06-30T08:20:30.759Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:30.759Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:30.760Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/payroll-skills-platform/services/firebaseextensions.googleapis.com [none]
[debug] [2025-06-30T08:20:30.760Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/payroll-skills-platform/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/payroll-skills-platform
[debug] [2025-06-30T08:20:31.694Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/payroll-skills-platform/services/firebaseextensions.googleapis.com 200
[debug] [2025-06-30T08:20:31.694Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/payroll-skills-platform/services/firebaseextensions.googleapis.com [omitted]
[warn] !  extensions: missing required API firebaseextensions.googleapis.com. Enabling now... 
[debug] [2025-06-30T08:20:31.695Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:31.695Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:31.695Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1/projects/payroll-skills-platform/services/firebaseextensions.googleapis.com:enable [none]
[debug] [2025-06-30T08:20:31.695Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1/projects/payroll-skills-platform/services/firebaseextensions.googleapis.com:enable x-goog-quota-user=projects/payroll-skills-platform
[debug] [2025-06-30T08:20:32.753Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1/projects/payroll-skills-platform/services/firebaseextensions.googleapis.com:enable 200
[debug] [2025-06-30T08:20:32.753Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1/projects/payroll-skills-platform/services/firebaseextensions.googleapis.com:enable [omitted]
[debug] [2025-06-30T08:20:42.765Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-06-30T08:20:42.766Z] > authorizing via signed-in user (hello@yourpayroll.info)
[debug] [2025-06-30T08:20:42.766Z] [iam] checking project payroll-skills-platform for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-06-30T08:20:42.766Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:42.766Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:42.767Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions [none]
[debug] [2025-06-30T08:20:42.767Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions x-goog-quota-user=projects/payroll-skills-platform
[debug] [2025-06-30T08:20:42.767Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-06-30T08:20:43.001Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions 200
[debug] [2025-06-30T08:20:43.001Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-06-30T08:20:43.002Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:43.002Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:43.002Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/payroll-skills-platform/instances pageSize=100&pageToken=
[debug] [2025-06-30T08:20:44.726Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/payroll-skills-platform/instances 200
[debug] [2025-06-30T08:20:44.726Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/payroll-skills-platform/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\kevin\Desktop\payroll-skills-app\functions (96.49 KB) for uploading 
[debug] [2025-06-30T08:20:44.773Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:44.774Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:44.774Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/payroll-skills-platform/locations/-/functions [none]
[debug] [2025-06-30T08:20:45.545Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/payroll-skills-platform/locations/-/functions 200
[debug] [2025-06-30T08:20:45.546Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/payroll-skills-platform/locations/-/functions {}
[debug] [2025-06-30T08:20:45.546Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:45.546Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:45.546Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-06-30T08:20:46.608Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/-/functions 200
[debug] [2025-06-30T08:20:46.608Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/-/functions {}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-06-30T08:20:46.612Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:46.612Z] Checked if tokens are valid: true, expires at: 1751273775133
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-06-30T08:20:46.613Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:46.613Z] Checked if tokens are valid: true, expires at: 1751273775133
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-06-30T08:20:46.613Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:46.613Z] Checked if tokens are valid: true, expires at: 1751273775133
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-06-30T08:20:46.614Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:46.614Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:46.614Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/run.googleapis.com [none]
[debug] [2025-06-30T08:20:46.614Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/run.googleapis.com x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:20:46.615Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/eventarc.googleapis.com [none]
[debug] [2025-06-30T08:20:46.615Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/eventarc.googleapis.com x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:20:46.617Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/pubsub.googleapis.com [none]
[debug] [2025-06-30T08:20:46.617Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/pubsub.googleapis.com x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:20:46.618Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/storage.googleapis.com [none]
[debug] [2025-06-30T08:20:46.618Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/storage.googleapis.com x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:20:47.493Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/storage.googleapis.com 200
[debug] [2025-06-30T08:20:47.493Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[debug] [2025-06-30T08:20:47.502Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/pubsub.googleapis.com 200
[debug] [2025-06-30T08:20:47.502Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-06-30T08:20:47.510Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/eventarc.googleapis.com 200
[debug] [2025-06-30T08:20:47.510Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/eventarc.googleapis.com [omitted]
[warn] !  functions: missing required API eventarc.googleapis.com. Enabling now... 
[debug] [2025-06-30T08:20:47.510Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:47.510Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:47.511Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1/projects/373583398443/services/eventarc.googleapis.com:enable [none]
[debug] [2025-06-30T08:20:47.511Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1/projects/373583398443/services/eventarc.googleapis.com:enable x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:20:47.512Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/run.googleapis.com 200
[debug] [2025-06-30T08:20:47.512Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/373583398443/services/run.googleapis.com [omitted]
[warn] !  functions: missing required API run.googleapis.com. Enabling now... 
[debug] [2025-06-30T08:20:47.512Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:47.512Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:47.513Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1/projects/373583398443/services/run.googleapis.com:enable [none]
[debug] [2025-06-30T08:20:47.513Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1/projects/373583398443/services/run.googleapis.com:enable x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:20:48.631Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1/projects/373583398443/services/run.googleapis.com:enable 200
[debug] [2025-06-30T08:20:48.631Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1/projects/373583398443/services/run.googleapis.com:enable [omitted]
[debug] [2025-06-30T08:20:48.685Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1/projects/373583398443/services/eventarc.googleapis.com:enable 200
[debug] [2025-06-30T08:20:48.685Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1/projects/373583398443/services/eventarc.googleapis.com:enable [omitted]
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-06-30T08:20:58.705Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:58.705Z] Checked if tokens are valid: true, expires at: 1751273775133
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-06-30T08:20:58.706Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:58.706Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:58.706Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-06-30T08:20:58.706Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:20:58.706Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity {}
[debug] [2025-06-30T08:20:58.709Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-06-30T08:20:58.709Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:20:58.709Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity {}
[debug] [2025-06-30T08:20:59.717Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-06-30T08:20:59.717Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-373583398443@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"100240653297361888704"}}
[debug] [2025-06-30T08:20:59.756Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-06-30T08:20:59.756Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-373583398443@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"101977038765633758308"}}
[debug] [2025-06-30T08:20:59.760Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:59.760Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:20:59.760Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform [none]
[debug] [2025-06-30T08:21:00.495Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform 200
[debug] [2025-06-30T08:21:00.495Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform {"projectNumber":"373583398443","projectId":"payroll-skills-platform","lifecycleState":"ACTIVE","name":"payroll-skills-platform","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-06-29T08:15:30.773984Z","parent":{"type":"organization","id":"1097197121616"}}
[debug] [2025-06-30T08:21:00.495Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:00.495Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:00.495Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/373583398443 [none]
[debug] [2025-06-30T08:21:00.767Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/373583398443 403
[debug] [2025-06-30T08:21:00.767Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/373583398443 {"error":{"code":403,"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/373583398443","serviceTitle":"Compute Engine API","service":"compute.googleapis.com","containerInfo":"373583398443","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}]}]}}
[debug] [2025-06-30T08:21:00.768Z] unable to look up default compute service account. Falling back to 373583398443-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/373583398443","serviceTitle":"Compute Engine API","service":"compute.googleapis.com","containerInfo":"373583398443","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/373583398443 had HTTP Error: 403, Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-06-30T08:21:00.769Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:00.769Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:00.769Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/payroll-skills-platform/billingInfo [none]
[debug] [2025-06-30T08:21:01.147Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/payroll-skills-platform/billingInfo 200
[debug] [2025-06-30T08:21:01.147Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/payroll-skills-platform/billingInfo {"name":"projects/payroll-skills-platform/billingInfo","projectId":"payroll-skills-platform","billingAccountName":"billingAccounts/0102CC-8EDDD1-3D89FE","billingEnabled":true}
[debug] [2025-06-30T08:21:01.149Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:01.149Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:01.149Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-06-30T08:21:03.054Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-06-30T08:21:03.054Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/96260a72-4425-428f-a14b-0e65a48466c0.zip?GoogleAccessId=service-373583398443@gcf-admin-robot.iam.gserviceaccount.com&Expires=1751273462&Signature=iPoPmzFEqeUO2Ddq8Pf8JvIXPdcNFkUPNKJySL4a18HPLhCqdzNBPQDb%2BIBcsHkZm%2BZlM8lbryLLY3aRujmhvyaxRiY8AY%2B7gxnAX%2FrKjqHMy9uo1z4q09rD4QxQJg6i%2B1pc4lm4jfzrfbp%2BRB2iBQYrwjCn90VWgxZctGGYMGk2x6zbsN8rR9CwPXLduC9xGvCxLT6jBDUbebM6aenJsnGwPMoJ9jfHBY6KthxTMLvLQKHbLOIbMfeTxm56cXiwaCgRV0KxQaglhlJbk6B4cl%2F0fE0MmrJtYk8KlgJveRpuAB7JqBctQL0o3eEBCB18Nn18AMGk7e0fjmR3yAJmKg%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com","object":"96260a72-4425-428f-a14b-0e65a48466c0.zip"}}
[debug] [2025-06-30T08:21:03.055Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/96260a72-4425-428f-a14b-0e65a48466c0.zip GoogleAccessId=service-373583398443%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1751273462&Signature=iPoPmzFEqeUO2Ddq8Pf8JvIXPdcNFkUPNKJySL4a18HPLhCqdzNBPQDb%2BIBcsHkZm%2BZlM8lbryLLY3aRujmhvyaxRiY8AY%2B7gxnAX%2FrKjqHMy9uo1z4q09rD4QxQJg6i%2B1pc4lm4jfzrfbp%2BRB2iBQYrwjCn90VWgxZctGGYMGk2x6zbsN8rR9CwPXLduC9xGvCxLT6jBDUbebM6aenJsnGwPMoJ9jfHBY6KthxTMLvLQKHbLOIbMfeTxm56cXiwaCgRV0KxQaglhlJbk6B4cl%2F0fE0MmrJtYk8KlgJveRpuAB7JqBctQL0o3eEBCB18Nn18AMGk7e0fjmR3yAJmKg%3D%3D
[debug] [2025-06-30T08:21:03.055Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/96260a72-4425-428f-a14b-0e65a48466c0.zip [stream]
[debug] [2025-06-30T08:21:03.653Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/96260a72-4425-428f-a14b-0e65a48466c0.zip 200
[debug] [2025-06-30T08:21:03.653Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/96260a72-4425-428f-a14b-0e65a48466c0.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: creating Node.js 22 (2nd Gen) function callGemini(us-central1)... 
[debug] [2025-06-30T08:21:03.658Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:03.658Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:03.658Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions functionId=callGemini
[debug] [2025-06-30T08:21:03.658Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions {"name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com","object":"96260a72-4425-428f-a14b-0e65a48466c0.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"}}
[debug] [2025-06-30T08:21:05.863Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions 200
[debug] [2025-06-30T08:21:05.863Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-06-30T08:21:05.864Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:05.864Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:05.864Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:21:06.596Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:21:06.596Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2025-06-30T08:21:07.106Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:21:07.107Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:07.107Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:07.107Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:21:07.795Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:21:07.795Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2025-06-30T08:21:08.810Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:21:08.810Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:08.810Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:08.811Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:21:09.610Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:21:09.611Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2025-06-30T08:21:11.619Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:21:11.619Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:11.619Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:11.620Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:21:12.375Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:21:12.376Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2025-06-30T08:21:16.391Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:21:16.391Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:16.391Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:16.392Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:21:17.191Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:21:17.192Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/008b1256-58cc-4fba-aac9-10eab32bea30?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30"},"done":false}
[debug] [2025-06-30T08:21:25.207Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:21:25.207Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:25.207Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:25.207Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:21:26.097Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:21:26.097Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/008b1256-58cc-4fba-aac9-10eab32bea30?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30"},"done":false}
[debug] [2025-06-30T08:21:36.106Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:21:36.107Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:36.107Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:36.108Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:21:36.908Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:21:36.908Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/008b1256-58cc-4fba-aac9-10eab32bea30?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30"},"done":false}
[debug] [2025-06-30T08:21:46.909Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:21:46.909Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:46.910Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:46.910Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:21:47.807Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:21:47.807Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/008b1256-58cc-4fba-aac9-10eab32bea30?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30"},"done":false}
[debug] [2025-06-30T08:21:57.813Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:21:57.813Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:57.813Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:21:57.813Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:21:58.600Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:21:58.600Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/008b1256-58cc-4fba-aac9-10eab32bea30?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30"},"done":false}
[debug] [2025-06-30T08:22:08.615Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:22:08.616Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:22:08.616Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:22:08.616Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:22:09.514Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:22:09.515Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/008b1256-58cc-4fba-aac9-10eab32bea30?project=373583398443"},{"name":"SERVICE","message":"Creating Cloud Run service","state":"IN_PROGRESS","resource":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/callgemini?project=payroll-skills-platform"}],"sourceToken":"Cldwcm9qZWN0cy8zNzM1ODMzOTg0NDMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8wMDhiMTI1Ni01OGNjLTRmYmEtYWFjOS0xMGVhYjMyYmVhMzASf3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3BheXJvbGwtc2tpbGxzLXBsYXRmb3JtL2djZi1hcnRpZmFjdHMvcGF5cm9sbC0tc2tpbGxzLS1wbGF0Zm9ybV9fdXMtLWNlbnRyYWwxX19jYWxsX2dlbWluaTp2ZXJzaW9uXzEYq4y52u8KIktwcm9qZWN0cy9wYXlyb2xsLXNraWxscy1wbGF0Zm9ybS9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL2NhbGxHZW1pbmkqDAiokonDBhCA8LOfAzIIbm9kZWpzMjI6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMyMjpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMjJAAQ==","operationType":"CREATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30"},"done":false}
[debug] [2025-06-30T08:22:09.515Z] Got source token Cldwcm9qZWN0cy8zNzM1ODMzOTg0NDMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8wMDhiMTI1Ni01OGNjLTRmYmEtYWFjOS0xMGVhYjMyYmVhMzASf3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3BheXJvbGwtc2tpbGxzLXBsYXRmb3JtL2djZi1hcnRpZmFjdHMvcGF5cm9sbC0tc2tpbGxzLS1wbGF0Zm9ybV9fdXMtLWNlbnRyYWwxX19jYWxsX2dlbWluaTp2ZXJzaW9uXzEYq4y52u8KIktwcm9qZWN0cy9wYXlyb2xsLXNraWxscy1wbGF0Zm9ybS9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL2NhbGxHZW1pbmkqDAiokonDBhCA8LOfAzIIbm9kZWpzMjI6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMyMjpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMjJAAQ== for region us-central1
[debug] [2025-06-30T08:22:19.520Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:22:19.520Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:22:19.520Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:22:19.520Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:22:20.370Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:22:20.370Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/008b1256-58cc-4fba-aac9-10eab32bea30?project=373583398443"},{"name":"SERVICE","message":"Creating Cloud Run service","state":"IN_PROGRESS","resource":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/callgemini?project=payroll-skills-platform"}],"sourceToken":"Cldwcm9qZWN0cy8zNzM1ODMzOTg0NDMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8wMDhiMTI1Ni01OGNjLTRmYmEtYWFjOS0xMGVhYjMyYmVhMzASf3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3BheXJvbGwtc2tpbGxzLXBsYXRmb3JtL2djZi1hcnRpZmFjdHMvcGF5cm9sbC0tc2tpbGxzLS1wbGF0Zm9ybV9fdXMtLWNlbnRyYWwxX19jYWxsX2dlbWluaTp2ZXJzaW9uXzEYq4y52u8KIktwcm9qZWN0cy9wYXlyb2xsLXNraWxscy1wbGF0Zm9ybS9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL2NhbGxHZW1pbmkqDAiokonDBhCA8LOfAzIIbm9kZWpzMjI6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMyMjpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMjJAAQ==","operationType":"CREATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30"},"done":false}
[debug] [2025-06-30T08:22:20.370Z] Got source token Cldwcm9qZWN0cy8zNzM1ODMzOTg0NDMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8wMDhiMTI1Ni01OGNjLTRmYmEtYWFjOS0xMGVhYjMyYmVhMzASf3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3BheXJvbGwtc2tpbGxzLXBsYXRmb3JtL2djZi1hcnRpZmFjdHMvcGF5cm9sbC0tc2tpbGxzLS1wbGF0Zm9ybV9fdXMtLWNlbnRyYWwxX19jYWxsX2dlbWluaTp2ZXJzaW9uXzEYq4y52u8KIktwcm9qZWN0cy9wYXlyb2xsLXNraWxscy1wbGF0Zm9ybS9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL2NhbGxHZW1pbmkqDAiokonDBhCA8LOfAzIIbm9kZWpzMjI6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMyMjpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMjJAAQ== for region us-central1
[debug] [2025-06-30T08:22:30.382Z] [create-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:22:30.383Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:22:30.383Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:22:30.383Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac [none]
[debug] [2025-06-30T08:22:31.177Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac 200
[debug] [2025-06-30T08:22:31.177Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751271664349-638c5b5757328-ccf4b004-5633d9ac","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:21:05.792327555Z","endTime":"2025-06-30T08:22:30.559093813Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","message":"Deleting function artifacts in Artifact Registry","state":"COMPLETE"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"COMPLETE","resource":"projects/payroll-skills-platform/locations/us-central1/services/callgemini"}],"operationType":"CREATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Could not create or update Cloud Run service callgemini, Container Healthcheck failed. Revision 'callgemini-00001-fit' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=payroll-skills-platform&resource=cloud_run_revision/service_name/callgemini/revision_name/callgemini-00001-fit&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22callgemini%22%0Aresource.labels.revision_name%3D%22callgemini-00001-fit%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start"}}
[debug] [2025-06-30T08:22:31.178Z] Got source token undefined for region us-central1
[error] Could not create or update Cloud Run service callgemini, Container Healthcheck failed. Revision 'callgemini-00001-fit' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.

Logs URL: https://console.cloud.google.com/logs/viewer?project=payroll-skills-platform&resource=cloud_run_revision/service_name/callgemini/revision_name/callgemini-00001-fit&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22callgemini%22%0Aresource.labels.revision_name%3D%22callgemini-00001-fit%22 
For more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start
[debug] [2025-06-30T08:22:31.182Z] Total Function Deployment time: 87526
[debug] [2025-06-30T08:22:31.183Z] 1 Functions Deployed
[debug] [2025-06-30T08:22:31.183Z] 1 Functions Errored
[debug] [2025-06-30T08:22:31.183Z] 0 Function Deployments Aborted
[debug] [2025-06-30T08:22:31.183Z] Average Function Deployment time: 87525
[info] 
[info] Functions deploy had errors with the following functions:
	callGemini(us-central1)
[debug] [2025-06-30T08:22:31.185Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:22:31.185Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:22:31.185Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-06-30T08:22:31.532Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-06-30T08:22:31.532Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts {"name":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-06-30T08:21:14.425590Z","updateTime":"2025-06-30T08:22:30.436412Z","mode":"STANDARD_REPOSITORY","sizeBytes":"95718033","vulnerabilityScanningConfig":{"lastEnableTime":"2025-06-30T08:21:05.990834050Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/payroll-skills-platform/gcf-artifacts"}
[warn] !  functions: No cleanup policy detected for repositories in us-central1. This may result in a small monthly bill as container images accumulate over time. 
[info] i  functions: Configuring cleanup policy for repository in us-central1. Images older than 1 days will be automatically deleted. 
[debug] [2025-06-30T08:23:25.179Z] Setting up artifact cleanup policy for region us-central1
[debug] [2025-06-30T08:23:25.179Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:23:25.179Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:23:25.179Z] >>> [apiv2][query] PATCH https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts updateMask=name%2CcleanupPolicies%2CcleanupPolicyDryRun%2Clabels
[debug] [2025-06-30T08:23:25.179Z] >>> [apiv2][body] PATCH https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts {"name":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","condition":{"tagState":"ANY","olderThan":"86400s"},"action":"DELETE"}},"cleanupPolicyDryRun":false,"labels":{"goog-managed-by":"cloudfunctions"}}
[debug] [2025-06-30T08:23:26.023Z] <<< [apiv2][status] PATCH https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-06-30T08:23:26.023Z] <<< [apiv2][body] PATCH https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts {"name":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-06-30T08:21:14.425590Z","updateTime":"2025-06-30T08:23:25.938915Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"vulnerabilityScanningConfig":{"lastEnableTime":"2025-06-30T08:21:05.990834050Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true}
[info] i  functions: Configured cleanup policy for repository in us-central1. 
[debug] [2025-06-30T08:23:26.023Z] Functions deploy failed.
[debug] [2025-06-30T08:23:26.024Z] {
  "endpoint": {
    "id": "callGemini",
    "project": "payroll-skills-platform",
    "region": "us-central1",
    "entryPoint": "callGemini",
    "platform": "gcfv2",
    "runtime": "nodejs22",
    "callableTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "payroll-skills-platform",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/payroll-skills-platform/locations/us-central1/services/callGemini"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "e1842630bd4613b433c7f0d025c684f1663aa0c1"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Could not create or update Cloud Run service callgemini, Container Healthcheck failed. Revision 'callgemini-00001-fit' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=payroll-skills-platform&resource=cloud_run_revision/service_name/callgemini/revision_name/callgemini-00001-fit&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22callgemini%22%0Aresource.labels.revision_name%3D%22callgemini-00001-fit%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start",
    "original": {
      "code": 3,
      "message": "Could not create or update Cloud Run service callgemini, Container Healthcheck failed. Revision 'callgemini-00001-fit' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=payroll-skills-platform&resource=cloud_run_revision/service_name/callgemini/revision_name/callgemini-00001-fit&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22callgemini%22%0Aresource.labels.revision_name%3D%22callgemini-00001-fit%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start"
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-06-30T08:23:26.025Z] Error: Failed to create function callGemini in region us-central1
    at C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:294:27
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.createV2Function (C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:278:30)
    at async Fabricator.createEndpoint (C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:137:13)
    at async handle (C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2025-06-30T08:28:53.324Z] ----------------------------------------------------------------------
[debug] [2025-06-30T08:28:53.337Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-06-30T08:28:53.338Z] CLI Version:   14.9.0
[debug] [2025-06-30T08:28:53.338Z] Platform:      win32
[debug] [2025-06-30T08:28:53.338Z] Node Version:  v22.17.0
[debug] [2025-06-30T08:28:53.338Z] Time:          Mon Jun 30 2025 09:28:53 GMT+0100 (British Summer Time)
[debug] [2025-06-30T08:28:53.338Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-06-30T08:28:53.518Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-06-30T08:28:53.519Z] > authorizing via signed-in user (hello@yourpayroll.info)
[debug] [2025-06-30T08:28:53.519Z] [iam] checking project payroll-skills-platform for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-06-30T08:28:53.520Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:53.520Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:53.521Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions [none]
[debug] [2025-06-30T08:28:53.521Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions x-goog-quota-user=projects/payroll-skills-platform
[debug] [2025-06-30T08:28:53.521Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-06-30T08:28:54.319Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions 200
[debug] [2025-06-30T08:28:54.319Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-06-30T08:28:54.319Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:54.319Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:54.320Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-06-30T08:28:54.320Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-06-30T08:28:55.025Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-06-30T08:28:55.025Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'payroll-skills-platform'...
[info] 
[info] i  deploying functions 
[debug] [2025-06-30T08:28:55.029Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:55.029Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:55.029Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform [none]
[debug] [2025-06-30T08:28:55.231Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform 200
[debug] [2025-06-30T08:28:55.232Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform {"projectNumber":"373583398443","projectId":"payroll-skills-platform","lifecycleState":"ACTIVE","name":"payroll-skills-platform","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-06-29T08:15:30.773984Z","parent":{"type":"organization","id":"1097197121616"}}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-06-30T08:28:55.237Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:55.237Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:55.237Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/payroll-skills-platform/adminSdkConfig [none]
[debug] [2025-06-30T08:28:55.640Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/payroll-skills-platform/adminSdkConfig 200
[debug] [2025-06-30T08:28:55.641Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/payroll-skills-platform/adminSdkConfig {"projectId":"payroll-skills-platform","storageBucket":"payroll-skills-platform.firebasestorage.app"}
[debug] [2025-06-30T08:28:55.642Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:55.642Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:55.642Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs [none]
[debug] [2025-06-30T08:28:55.967Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs 200
[debug] [2025-06-30T08:28:55.967Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs {"configs":[{"name":"projects/payroll-skills-platform/configs/gemini"}]}
[debug] [2025-06-30T08:28:55.968Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:55.968Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:55.968Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables [none]
[debug] [2025-06-30T08:28:56.246Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables 200
[debug] [2025-06-30T08:28:56.246Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables {"variables":[{"name":"projects/payroll-skills-platform/configs/gemini/variables/key","updateTime":"2025-06-30T08:00:41.435880940Z"}]}
[debug] [2025-06-30T08:28:56.246Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:56.246Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:28:56.246Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables/key [none]
[debug] [2025-06-30T08:28:56.453Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables/key 200
[debug] [2025-06-30T08:28:56.453Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables/key {"name":"projects/payroll-skills-platform/configs/gemini/variables/key","updateTime":"2025-06-30T08:00:41.435880940Z","text":"AIzaSyAas-F3EfJXljJKEERoQ2vQVt-XVDNLc70"}
[debug] [2025-06-30T08:28:56.458Z] Validating nodejs source
[debug] [2025-06-30T08:28:57.470Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.18.0",
    "node-fetch": "^2.6.7"
  },
  "devDependencies": {
    "@types/node-fetch": "^2.6.12",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^5.7.3"
  },
  "private": true
}
[debug] [2025-06-30T08:28:57.471Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-06-30T08:28:57.472Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-06-30T08:28:57.480Z] Found firebase-functions binary at 'C:\Users\kevin\Desktop\payroll-skills-app\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8786

[debug] [2025-06-30T08:28:58.231Z] Got response from /__/functions.yaml {"endpoints":{"callGemini":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"callGemini"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-06-30T08:29:02.272Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-06-30T08:29:02.272Z] > authorizing via signed-in user (hello@yourpayroll.info)
[debug] [2025-06-30T08:29:02.272Z] [iam] checking project payroll-skills-platform for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-06-30T08:29:02.272Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:02.272Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:02.272Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions [none]
[debug] [2025-06-30T08:29:02.272Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions x-goog-quota-user=projects/payroll-skills-platform
[debug] [2025-06-30T08:29:02.272Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-06-30T08:29:03.015Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions 200
[debug] [2025-06-30T08:29:03.015Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-06-30T08:29:03.016Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:03.016Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:03.016Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/payroll-skills-platform/instances pageSize=100&pageToken=
[debug] [2025-06-30T08:29:03.813Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/payroll-skills-platform/instances 200
[debug] [2025-06-30T08:29:03.813Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/payroll-skills-platform/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\kevin\Desktop\payroll-skills-app\functions (96.37 KB) for uploading 
[debug] [2025-06-30T08:29:03.854Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:03.854Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:03.854Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/payroll-skills-platform/locations/-/functions [none]
[debug] [2025-06-30T08:29:04.575Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/payroll-skills-platform/locations/-/functions 200
[debug] [2025-06-30T08:29:04.575Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/payroll-skills-platform/locations/-/functions {}
[debug] [2025-06-30T08:29:04.575Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:04.575Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:04.576Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-06-30T08:29:05.629Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/-/functions 200
[debug] [2025-06-30T08:29:05.629Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/-/functions {"functions":[{"name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"build":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30","runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"state":"FAILED","updateTime":"2025-06-30T08:22:30.568079043Z","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"e1842630bd4613b433c7f0d025c684f1663aa0c1"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","createTime":"2025-06-30T08:21:05.787102825Z","satisfiesPzi":true}]}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-06-30T08:29:05.634Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:05.634Z] Checked if tokens are valid: true, expires at: 1751273775133
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-06-30T08:29:05.634Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:05.634Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:05.634Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-06-30T08:29:05.634Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:29:05.634Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity {}
[debug] [2025-06-30T08:29:05.635Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-06-30T08:29:05.635Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:29:05.635Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity {}
[debug] [2025-06-30T08:29:06.554Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-06-30T08:29:06.554Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-373583398443@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"101977038765633758308"}}
[debug] [2025-06-30T08:29:06.580Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-06-30T08:29:06.580Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-373583398443@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"100240653297361888704"}}
[debug] [2025-06-30T08:29:06.581Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:06.581Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:06.582Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform [none]
[debug] [2025-06-30T08:29:06.766Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform 200
[debug] [2025-06-30T08:29:06.766Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform {"projectNumber":"373583398443","projectId":"payroll-skills-platform","lifecycleState":"ACTIVE","name":"payroll-skills-platform","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-06-29T08:15:30.773984Z","parent":{"type":"organization","id":"1097197121616"}}
[debug] [2025-06-30T08:29:06.766Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:06.766Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:06.767Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/373583398443 [none]
[debug] [2025-06-30T08:29:07.109Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/373583398443 403
[debug] [2025-06-30T08:29:07.110Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/373583398443 {"error":{"code":403,"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"373583398443","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443","service":"compute.googleapis.com","serviceTitle":"Compute Engine API","consumer":"projects/373583398443"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}]}]}}
[debug] [2025-06-30T08:29:07.110Z] unable to look up default compute service account. Falling back to 373583398443-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"373583398443","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443","service":"compute.googleapis.com","serviceTitle":"Compute Engine API","consumer":"projects/373583398443"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/373583398443 had HTTP Error: 403, Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-06-30T08:29:07.111Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:07.111Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:07.111Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/373583398443 [none]
[debug] [2025-06-30T08:29:07.313Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/373583398443 403
[debug] [2025-06-30T08:29:07.313Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/373583398443 {"error":{"code":403,"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"373583398443","consumer":"projects/373583398443","service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443","serviceTitle":"Compute Engine API"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}]}]}}
[debug] [2025-06-30T08:29:07.313Z] unable to look up default compute service account. Falling back to 373583398443-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"373583398443","consumer":"projects/373583398443","service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443","serviceTitle":"Compute Engine API"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/373583398443 had HTTP Error: 403, Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-06-30T08:29:07.315Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:07.315Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:07.315Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/payroll-skills-platform/billingInfo [none]
[debug] [2025-06-30T08:29:08.236Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/payroll-skills-platform/billingInfo 200
[debug] [2025-06-30T08:29:08.236Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/payroll-skills-platform/billingInfo {"name":"projects/payroll-skills-platform/billingInfo","projectId":"payroll-skills-platform","billingAccountName":"billingAccounts/0102CC-8EDDD1-3D89FE","billingEnabled":true}
[debug] [2025-06-30T08:29:08.238Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:08.238Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:08.238Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-06-30T08:29:09.155Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-06-30T08:29:09.155Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/131f00f2-4517-4dc7-98b7-5aa5bc22f501.zip?GoogleAccessId=service-373583398443@gcf-admin-robot.iam.gserviceaccount.com&Expires=1751273948&Signature=y%2FlFQhZO9NZdWklIrxv1UZhFBWORaim8iahh4SW2Uzr1ebdHBzFLvwE2W8bwip5FOxEUuQO1UF9FmqFOeGsTWVbfeVme3ZcxEih%2F5bL5FhyTozxml5zedoDCPmb9pKTkCOThKtKj5zGXaVrwZwG3X77VPDeqbLBIGWtzuu7J4ZziKkT2pbteOYPSwopBH2NXAyq9lV%2FzUaHhiu1bZhoqk97dyYSCJJwAu7UzLZOzm2efBZyCuIQp5qq%2FfGRsFToaZsnFzgBj7hirwYHmGhl4Y2iacLnV1xw%2FcW2p5Cp7GMQrA5gPZvdggTR%2BctVbkZwbm14UUpJiqsiW46G77lx9rQ%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com","object":"131f00f2-4517-4dc7-98b7-5aa5bc22f501.zip"}}
[debug] [2025-06-30T08:29:09.156Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/131f00f2-4517-4dc7-98b7-5aa5bc22f501.zip GoogleAccessId=service-373583398443%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1751273948&Signature=y%2FlFQhZO9NZdWklIrxv1UZhFBWORaim8iahh4SW2Uzr1ebdHBzFLvwE2W8bwip5FOxEUuQO1UF9FmqFOeGsTWVbfeVme3ZcxEih%2F5bL5FhyTozxml5zedoDCPmb9pKTkCOThKtKj5zGXaVrwZwG3X77VPDeqbLBIGWtzuu7J4ZziKkT2pbteOYPSwopBH2NXAyq9lV%2FzUaHhiu1bZhoqk97dyYSCJJwAu7UzLZOzm2efBZyCuIQp5qq%2FfGRsFToaZsnFzgBj7hirwYHmGhl4Y2iacLnV1xw%2FcW2p5Cp7GMQrA5gPZvdggTR%2BctVbkZwbm14UUpJiqsiW46G77lx9rQ%3D%3D
[debug] [2025-06-30T08:29:09.156Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/131f00f2-4517-4dc7-98b7-5aa5bc22f501.zip [stream]
[debug] [2025-06-30T08:29:09.727Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/131f00f2-4517-4dc7-98b7-5aa5bc22f501.zip 200
[debug] [2025-06-30T08:29:09.727Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/131f00f2-4517-4dc7-98b7-5aa5bc22f501.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 22 (2nd Gen) function callGemini(us-central1)... 
[debug] [2025-06-30T08:29:09.734Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:09.734Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:09.734Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions/callGemini updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels
[debug] [2025-06-30T08:29:09.734Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions/callGemini {"name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com","object":"131f00f2-4517-4dc7-98b7-5aa5bc22f501.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd"}}
[debug] [2025-06-30T08:29:10.739Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions/callGemini 200
[debug] [2025-06-30T08:29:10.739Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions/callGemini {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:29:10.665343972Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-06-30T08:29:10.740Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:10.740Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:10.740Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a [none]
[debug] [2025-06-30T08:29:11.474Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a 200
[debug] [2025-06-30T08:29:11.475Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:29:10.665343972Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272150595731"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"FAILED","labels":{"deployment-callable":"true","firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2025-06-30T08:29:11.987Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:29:11.987Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:11.987Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:11.987Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a [none]
[debug] [2025-06-30T08:29:12.693Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a 200
[debug] [2025-06-30T08:29:12.693Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:29:10.665343972Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272150595731"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"FAILED","labels":{"deployment-callable":"true","firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017"},"done":false}
[debug] [2025-06-30T08:29:13.707Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:29:13.708Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:13.708Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:13.708Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a [none]
[debug] [2025-06-30T08:29:14.583Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a 200
[debug] [2025-06-30T08:29:14.584Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:29:10.665343972Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272150595731"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"FAILED","labels":{"deployment-callable":"true","firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017"},"done":false}
[debug] [2025-06-30T08:29:16.590Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:29:16.591Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:16.591Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:16.591Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a [none]
[debug] [2025-06-30T08:29:17.291Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a 200
[debug] [2025-06-30T08:29:17.291Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:29:10.665343972Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272150595731"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"FAILED","labels":{"deployment-callable":"true","firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017"},"done":false}
[debug] [2025-06-30T08:29:21.298Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:29:21.299Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:21.299Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:21.299Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a [none]
[debug] [2025-06-30T08:29:22.056Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a 200
[debug] [2025-06-30T08:29:22.057Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:29:10.665343972Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272150595731"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"FAILED","labels":{"deployment-callable":"true","firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017"},"done":false}
[debug] [2025-06-30T08:29:30.067Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:29:30.068Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:30.068Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:30.068Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a [none]
[debug] [2025-06-30T08:29:30.874Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a 200
[debug] [2025-06-30T08:29:30.874Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:29:10.665343972Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272150595731"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"FAILED","labels":{"deployment-callable":"true","firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017"},"done":false}
[debug] [2025-06-30T08:29:40.895Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:29:40.901Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:40.901Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:40.902Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a [none]
[debug] [2025-06-30T08:29:41.727Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a 200
[debug] [2025-06-30T08:29:41.727Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:29:10.665343972Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272150595731"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"FAILED","labels":{"deployment-callable":"true","firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017"},"done":false}
[debug] [2025-06-30T08:29:51.741Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:29:51.742Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:51.742Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:29:51.742Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a [none]
[debug] [2025-06-30T08:29:52.611Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a 200
[debug] [2025-06-30T08:29:52.612Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:29:10.665343972Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272150595731"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"FAILED","labels":{"deployment-callable":"true","firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/2620ffc0-f5fb-4426-9284-0d8dc495a017"},"done":false}
[debug] [2025-06-30T08:30:02.616Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:30:02.617Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:30:02.617Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:30:02.618Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a [none]
[debug] [2025-06-30T08:30:03.480Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a 200
[debug] [2025-06-30T08:30:03.480Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272149989-638c5d267b90e-353eaa6d-fad0353a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:29:10.665343972Z","endTime":"2025-06-30T08:29:55.274919721Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272150595731"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"FAILED","labels":{"deployment-callable":"true","firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE and message: npm warn ERESOLVE overriding peer dependency\nnpm warn While resolving: functions@undefined\nnpm warn Found: firebase-admin@12.7.0\nnpm warn node_modules/firebase-admin\nnpm warn   firebase-admin@\"^10.0.2\" from the root project\nnpm warn   2 more (firebase-functions, firebase-functions-test)\nnpm warn\nnpm warn Could not resolve dependency:\nnpm warn peer firebase-admin@\"^11.10.0 || ^12.0.0 || ^13.0.0\" from firebase-functions@6.3.2\nnpm warn node_modules/firebase-functions\nnpm warn   firebase-functions@\"^3.18.0\" from the root project\nnpm warn   1 more (firebase-functions-test)\nnpm warn ERESOLVE overriding peer dependency\nnpm warn While resolving: functions@undefined\nnpm warn Found: firebase-functions@6.3.2\nnpm warn node_modules/firebase-functions\nnpm warn   firebase-functions@\"^3.18.0\" from the root project\nnpm warn   1 more (firebase-functions-test)\nnpm warn\nnpm warn Could not resolve dependency:\nnpm warn peer firebase-functions@\">=4.9.0\" from firebase-functions-test@3.4.1\nnpm warn node_modules/firebase-functions-test\nnpm warn   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@10.3.0\nnpm error Invalid: lock file's firebase-functions@6.3.2 does not satisfy firebase-functions@3.24.1\nnpm error Invalid: lock file's @fastify/busboy@3.1.1 does not satisfy @fastify/busboy@1.2.1\nnpm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@0.2.10\nnpm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@0.9.17\nnpm error Invalid: lock file's @google-cloud/firestore@7.11.2 does not satisfy @google-cloud/firestore@4.15.1\nnpm error Invalid: lock file's @google-cloud/storage@7.16.0 does not satisfy @google-cloud/storage@5.20.5\nnpm error Invalid: lock file's jsonwebtoken@9.0.2 does not satisfy jsonwebtoken@8.5.1\nnpm error Invalid: lock file's jwks-rsa@3.2.0 does not satisfy jwks-rsa@2.1.5\nnpm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2\nnpm error Missing: text-decoding@1.0.0 from lock file\nnpm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.5.21\nnpm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@0.13.10\nnpm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.3.4\nnpm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.7.3\nnpm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.1.7\nnpm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3\nnpm error Missing: @firebase/app-types@0.8.1 from lock file\nnpm error Invalid: lock file's google-gax@4.6.1 does not satisfy google-gax@2.30.5\nnpm error Invalid: lock file's protobufjs@7.5.3 does not satisfy protobufjs@6.11.4\nnpm error Invalid: lock file's @google-cloud/paginator@5.0.2 does not satisfy @google-cloud/paginator@3.0.7\nnpm error Invalid: lock file's @google-cloud/projectify@4.0.0 does not satisfy @google-cloud/projectify@2.1.1\nnpm error Invalid: lock file's @google-cloud/promisify@4.0.0 does not satisfy @google-cloud/promisify@2.0.4\nnpm error Missing: compressible@2.0.18 from lock file\nnpm error Missing: configstore@5.0.1 from lock file\nnpm error Missing: ent@2.2.2 from lock file\nnpm error Invalid: lock file's gaxios@6.7.1 does not satisfy gaxios@4.3.3\nnpm error Invalid: lock file's google-auth-library@9.15.1 does not satisfy google-auth-library@7.14.1\nnpm error Missing: hash-stream-validation@0.2.4 from lock file\nnpm error Missing: pumpify@2.0.1 from lock file\nnpm error Invalid: lock file's retry-request@7.0.2 does not satisfy retry-request@4.2.2\nnpm error Invalid: lock file's teeny-request@9.0.0 does not satisfy teeny-request@7.2.0\nnpm error Missing: xdg-basedir@4.0.0 from lock file\nnpm error Missing: dot-prop@5.3.0 from lock file\nnpm error Missing: make-dir@3.1.0 from lock file\nnpm error Missing: unique-string@2.0.0 from lock file\nnpm error Missing: write-file-atomic@3.0.3 from lock file\nnpm error Missing: is-obj@2.0.0 from lock file\nnpm error Missing: punycode@1.4.1 from lock file\nnpm error Invalid: lock file's @types/express@4.17.23 does not satisfy @types/express@4.17.3\nnpm error Invalid: lock file's @types/express-serve-static-core@4.19.6 does not satisfy @types/express-serve-static-core@5.0.6\nnpm error Invalid: lock file's https-proxy-agent@7.0.6 does not satisfy https-proxy-agent@5.0.1\nnpm error Missing: fast-text-encoding@1.0.6 from lock file\nnpm error Invalid: lock file's gcp-metadata@6.1.1 does not satisfy gcp-metadata@4.3.1\nnpm error Invalid: lock file's gtoken@7.1.0 does not satisfy gtoken@5.3.2\nnpm error Missing: lru-cache@6.0.0 from lock file\nnpm error Invalid: lock file's @grpc/grpc-js@1.13.4 does not satisfy @grpc/grpc-js@1.6.12\nnpm error Invalid: lock file's @grpc/proto-loader@0.7.15 does not satisfy @grpc/proto-loader@0.6.13\nnpm error Missing: is-stream-ended@0.1.4 from lock file\nnpm error Invalid: lock file's proto3-json-serializer@2.0.2 does not satisfy proto3-json-serializer@0.1.9\nnpm error Missing: protobufjs@6.11.3 from lock file\nnpm error Missing: @grpc/proto-loader@0.7.15 from lock file\nnpm error Invalid: lock file's long@5.3.2 does not satisfy long@4.0.0\nnpm error Missing: yargs@16.2.0 from lock file\nnpm error Missing: google-p12-pem@3.1.4 from lock file\nnpm error Invalid: lock file's agent-base@7.1.3 does not satisfy agent-base@6.0.2\nnpm error Missing: semver@5.7.2 from lock file\nnpm error Missing: @types/express@4.17.23 from lock file\nnpm error Invalid: lock file's @types/jsonwebtoken@9.0.10 does not satisfy @types/jsonwebtoken@8.5.9\nnpm error Invalid: lock file's jose@4.15.9 does not satisfy jose@2.0.7\nnpm error Missing: @panva/asn1.js@1.0.0 from lock file\nnpm error Missing: pump@3.0.3 from lock file\nnpm error Missing: crypto-random-string@2.0.0 from lock file\nnpm error Missing: long@5.3.2 from lock file\nnpm error Missing: protobufjs@7.5.3 from lock file\nnpm error Missing: cliui@7.0.4 from lock file\nnpm error Missing: string-width@4.2.3 from lock file\nnpm error Missing: yargs-parser@20.2.9 from lock file\nnpm error Missing: wrap-ansi@7.0.0 from lock file\nnpm error Missing: emoji-regex@8.0.0 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: is-typedarray@1.0.0 from lock file\nnpm error Missing: signal-exit@3.0.7 from lock file\nnpm error Missing: typedarray-to-buffer@3.1.5 from lock file\nnpm error Missing: yallist@4.0.0 from lock file\nnpm error Missing: @types/express-serve-static-core@4.19.6 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-06-30T08_29_32_858Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443."}}
[debug] [2025-06-30T08:30:03.481Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE and message: npm warn ERESOLVE overriding peer dependency
npm warn While resolving: functions@undefined
npm warn Found: firebase-admin@12.7.0
npm warn node_modules/firebase-admin
npm warn   firebase-admin@"^10.0.2" from the root project
npm warn   2 more (firebase-functions, firebase-functions-test)
npm warn
npm warn Could not resolve dependency:
npm warn peer firebase-admin@"^11.10.0 || ^12.0.0 || ^13.0.0" from firebase-functions@6.3.2
npm warn node_modules/firebase-functions
npm warn   firebase-functions@"^3.18.0" from the root project
npm warn   1 more (firebase-functions-test)
npm warn ERESOLVE overriding peer dependency
npm warn While resolving: functions@undefined
npm warn Found: firebase-functions@6.3.2
npm warn node_modules/firebase-functions
npm warn   firebase-functions@"^3.18.0" from the root project
npm warn   1 more (firebase-functions-test)
npm warn
npm warn Could not resolve dependency:
npm warn peer firebase-functions@">=4.9.0" from firebase-functions-test@3.4.1
npm warn node_modules/firebase-functions-test
npm warn   dev firebase-functions-test@"^3.1.0" from the root project
npm error code EUSAGE
npm error
npm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.
npm error
npm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@10.3.0
npm error Invalid: lock file's firebase-functions@6.3.2 does not satisfy firebase-functions@3.24.1
npm error Invalid: lock file's @fastify/busboy@3.1.1 does not satisfy @fastify/busboy@1.2.1
npm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@0.2.10
npm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@0.9.17
npm error Invalid: lock file's @google-cloud/firestore@7.11.2 does not satisfy @google-cloud/firestore@4.15.1
npm error Invalid: lock file's @google-cloud/storage@7.16.0 does not satisfy @google-cloud/storage@5.20.5
npm error Invalid: lock file's jsonwebtoken@9.0.2 does not satisfy jsonwebtoken@8.5.1
npm error Invalid: lock file's jwks-rsa@3.2.0 does not satisfy jwks-rsa@2.1.5
npm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2
npm error Missing: text-decoding@1.0.0 from lock file
npm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.5.21
npm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@0.13.10
npm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.3.4
npm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.7.3
npm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.1.7
npm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3
npm error Missing: @firebase/app-types@0.8.1 from lock file
npm error Invalid: lock file's google-gax@4.6.1 does not satisfy google-gax@2.30.5
npm error Invalid: lock file's protobufjs@7.5.3 does not satisfy protobufjs@6.11.4
npm error Invalid: lock file's @google-cloud/paginator@5.0.2 does not satisfy @google-cloud/paginator@3.0.7
npm error Invalid: lock file's @google-cloud/projectify@4.0.0 does not satisfy @google-cloud/projectify@2.1.1
npm error Invalid: lock file's @google-cloud/promisify@4.0.0 does not satisfy @google-cloud/promisify@2.0.4
npm error Missing: compressible@2.0.18 from lock file
npm error Missing: configstore@5.0.1 from lock file
npm error Missing: ent@2.2.2 from lock file
npm error Invalid: lock file's gaxios@6.7.1 does not satisfy gaxios@4.3.3
npm error Invalid: lock file's google-auth-library@9.15.1 does not satisfy google-auth-library@7.14.1
npm error Missing: hash-stream-validation@0.2.4 from lock file
npm error Missing: pumpify@2.0.1 from lock file
npm error Invalid: lock file's retry-request@7.0.2 does not satisfy retry-request@4.2.2
npm error Invalid: lock file's teeny-request@9.0.0 does not satisfy teeny-request@7.2.0
npm error Missing: xdg-basedir@4.0.0 from lock file
npm error Missing: dot-prop@5.3.0 from lock file
npm error Missing: make-dir@3.1.0 from lock file
npm error Missing: unique-string@2.0.0 from lock file
npm error Missing: write-file-atomic@3.0.3 from lock file
npm error Missing: is-obj@2.0.0 from lock file
npm error Missing: punycode@1.4.1 from lock file
npm error Invalid: lock file's @types/express@4.17.23 does not satisfy @types/express@4.17.3
npm error Invalid: lock file's @types/express-serve-static-core@4.19.6 does not satisfy @types/express-serve-static-core@5.0.6
npm error Invalid: lock file's https-proxy-agent@7.0.6 does not satisfy https-proxy-agent@5.0.1
npm error Missing: fast-text-encoding@1.0.6 from lock file
npm error Invalid: lock file's gcp-metadata@6.1.1 does not satisfy gcp-metadata@4.3.1
npm error Invalid: lock file's gtoken@7.1.0 does not satisfy gtoken@5.3.2
npm error Missing: lru-cache@6.0.0 from lock file
npm error Invalid: lock file's @grpc/grpc-js@1.13.4 does not satisfy @grpc/grpc-js@1.6.12
npm error Invalid: lock file's @grpc/proto-loader@0.7.15 does not satisfy @grpc/proto-loader@0.6.13
npm error Missing: is-stream-ended@0.1.4 from lock file
npm error Invalid: lock file's proto3-json-serializer@2.0.2 does not satisfy proto3-json-serializer@0.1.9
npm error Missing: protobufjs@6.11.3 from lock file
npm error Missing: @grpc/proto-loader@0.7.15 from lock file
npm error Invalid: lock file's long@5.3.2 does not satisfy long@4.0.0
npm error Missing: yargs@16.2.0 from lock file
npm error Missing: google-p12-pem@3.1.4 from lock file
npm error Invalid: lock file's agent-base@7.1.3 does not satisfy agent-base@6.0.2
npm error Missing: semver@5.7.2 from lock file
npm error Missing: @types/express@4.17.23 from lock file
npm error Invalid: lock file's @types/jsonwebtoken@9.0.10 does not satisfy @types/jsonwebtoken@8.5.9
npm error Invalid: lock file's jose@4.15.9 does not satisfy jose@2.0.7
npm error Missing: @panva/asn1.js@1.0.0 from lock file
npm error Missing: pump@3.0.3 from lock file
npm error Missing: crypto-random-string@2.0.0 from lock file
npm error Missing: long@5.3.2 from lock file
npm error Missing: protobufjs@7.5.3 from lock file
npm error Missing: cliui@7.0.4 from lock file
npm error Missing: string-width@4.2.3 from lock file
npm error Missing: yargs-parser@20.2.9 from lock file
npm error Missing: wrap-ansi@7.0.0 from lock file
npm error Missing: emoji-regex@8.0.0 from lock file
npm error Missing: semver@6.3.1 from lock file
npm error Missing: is-typedarray@1.0.0 from lock file
npm error Missing: signal-exit@3.0.7 from lock file
npm error Missing: typedarray-to-buffer@3.1.5 from lock file
npm error Missing: yallist@4.0.0 from lock file
npm error Missing: @types/express-serve-static-core@4.19.6 from lock file
npm error
npm error Clean install a project
npm error
npm error Usage:
npm error npm ci
npm error
npm error Options:
npm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]
npm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]
npm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]
npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
npm error [--no-bin-links] [--no-fund] [--dry-run]
npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
npm error [-ws|--workspaces] [--include-workspace-root] [--install-links]
npm error
npm error aliases: clean-install, ic, install-clean, isntall-clean
npm error
npm error Run "npm help ci" for more info
npm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-06-30T08_29_32_858Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443.
[debug] [2025-06-30T08:30:03.512Z] Total Function Deployment time: 53766
[debug] [2025-06-30T08:30:03.512Z] 1 Functions Deployed
[debug] [2025-06-30T08:30:03.513Z] 1 Functions Errored
[debug] [2025-06-30T08:30:03.513Z] 0 Function Deployments Aborted
[debug] [2025-06-30T08:30:03.513Z] Average Function Deployment time: 53764
[info] 
[info] Functions deploy had errors with the following functions:
	callGemini(us-central1)
[debug] [2025-06-30T08:30:03.521Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:30:03.521Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:30:03.522Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-06-30T08:30:04.431Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-06-30T08:30:04.431Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts {"name":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-06-30T08:21:14.425590Z","updateTime":"2025-06-30T08:23:25.938915Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"95718033","vulnerabilityScanningConfig":{"lastEnableTime":"2025-06-30T08:21:05.990834050Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/payroll-skills-platform/gcf-artifacts"}
[debug] [2025-06-30T08:30:04.433Z] Functions deploy failed.
[debug] [2025-06-30T08:30:04.434Z] {
  "endpoint": {
    "id": "callGemini",
    "project": "payroll-skills-platform",
    "region": "us-central1",
    "entryPoint": "callGemini",
    "platform": "gcfv2",
    "runtime": "nodejs22",
    "callableTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "payroll-skills-platform",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/payroll-skills-platform/locations/us-central1/services/callGemini"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "747da93b4fbac985b5428916e722d04bc1bdbdcd"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE and message: npm warn ERESOLVE overriding peer dependency\nnpm warn While resolving: functions@undefined\nnpm warn Found: firebase-admin@12.7.0\nnpm warn node_modules/firebase-admin\nnpm warn   firebase-admin@\"^10.0.2\" from the root project\nnpm warn   2 more (firebase-functions, firebase-functions-test)\nnpm warn\nnpm warn Could not resolve dependency:\nnpm warn peer firebase-admin@\"^11.10.0 || ^12.0.0 || ^13.0.0\" from firebase-functions@6.3.2\nnpm warn node_modules/firebase-functions\nnpm warn   firebase-functions@\"^3.18.0\" from the root project\nnpm warn   1 more (firebase-functions-test)\nnpm warn ERESOLVE overriding peer dependency\nnpm warn While resolving: functions@undefined\nnpm warn Found: firebase-functions@6.3.2\nnpm warn node_modules/firebase-functions\nnpm warn   firebase-functions@\"^3.18.0\" from the root project\nnpm warn   1 more (firebase-functions-test)\nnpm warn\nnpm warn Could not resolve dependency:\nnpm warn peer firebase-functions@\">=4.9.0\" from firebase-functions-test@3.4.1\nnpm warn node_modules/firebase-functions-test\nnpm warn   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@10.3.0\nnpm error Invalid: lock file's firebase-functions@6.3.2 does not satisfy firebase-functions@3.24.1\nnpm error Invalid: lock file's @fastify/busboy@3.1.1 does not satisfy @fastify/busboy@1.2.1\nnpm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@0.2.10\nnpm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@0.9.17\nnpm error Invalid: lock file's @google-cloud/firestore@7.11.2 does not satisfy @google-cloud/firestore@4.15.1\nnpm error Invalid: lock file's @google-cloud/storage@7.16.0 does not satisfy @google-cloud/storage@5.20.5\nnpm error Invalid: lock file's jsonwebtoken@9.0.2 does not satisfy jsonwebtoken@8.5.1\nnpm error Invalid: lock file's jwks-rsa@3.2.0 does not satisfy jwks-rsa@2.1.5\nnpm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2\nnpm error Missing: text-decoding@1.0.0 from lock file\nnpm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.5.21\nnpm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@0.13.10\nnpm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.3.4\nnpm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.7.3\nnpm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.1.7\nnpm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3\nnpm error Missing: @firebase/app-types@0.8.1 from lock file\nnpm error Invalid: lock file's google-gax@4.6.1 does not satisfy google-gax@2.30.5\nnpm error Invalid: lock file's protobufjs@7.5.3 does not satisfy protobufjs@6.11.4\nnpm error Invalid: lock file's @google-cloud/paginator@5.0.2 does not satisfy @google-cloud/paginator@3.0.7\nnpm error Invalid: lock file's @google-cloud/projectify@4.0.0 does not satisfy @google-cloud/projectify@2.1.1\nnpm error Invalid: lock file's @google-cloud/promisify@4.0.0 does not satisfy @google-cloud/promisify@2.0.4\nnpm error Missing: compressible@2.0.18 from lock file\nnpm error Missing: configstore@5.0.1 from lock file\nnpm error Missing: ent@2.2.2 from lock file\nnpm error Invalid: lock file's gaxios@6.7.1 does not satisfy gaxios@4.3.3\nnpm error Invalid: lock file's google-auth-library@9.15.1 does not satisfy google-auth-library@7.14.1\nnpm error Missing: hash-stream-validation@0.2.4 from lock file\nnpm error Missing: pumpify@2.0.1 from lock file\nnpm error Invalid: lock file's retry-request@7.0.2 does not satisfy retry-request@4.2.2\nnpm error Invalid: lock file's teeny-request@9.0.0 does not satisfy teeny-request@7.2.0\nnpm error Missing: xdg-basedir@4.0.0 from lock file\nnpm error Missing: dot-prop@5.3.0 from lock file\nnpm error Missing: make-dir@3.1.0 from lock file\nnpm error Missing: unique-string@2.0.0 from lock file\nnpm error Missing: write-file-atomic@3.0.3 from lock file\nnpm error Missing: is-obj@2.0.0 from lock file\nnpm error Missing: punycode@1.4.1 from lock file\nnpm error Invalid: lock file's @types/express@4.17.23 does not satisfy @types/express@4.17.3\nnpm error Invalid: lock file's @types/express-serve-static-core@4.19.6 does not satisfy @types/express-serve-static-core@5.0.6\nnpm error Invalid: lock file's https-proxy-agent@7.0.6 does not satisfy https-proxy-agent@5.0.1\nnpm error Missing: fast-text-encoding@1.0.6 from lock file\nnpm error Invalid: lock file's gcp-metadata@6.1.1 does not satisfy gcp-metadata@4.3.1\nnpm error Invalid: lock file's gtoken@7.1.0 does not satisfy gtoken@5.3.2\nnpm error Missing: lru-cache@6.0.0 from lock file\nnpm error Invalid: lock file's @grpc/grpc-js@1.13.4 does not satisfy @grpc/grpc-js@1.6.12\nnpm error Invalid: lock file's @grpc/proto-loader@0.7.15 does not satisfy @grpc/proto-loader@0.6.13\nnpm error Missing: is-stream-ended@0.1.4 from lock file\nnpm error Invalid: lock file's proto3-json-serializer@2.0.2 does not satisfy proto3-json-serializer@0.1.9\nnpm error Missing: protobufjs@6.11.3 from lock file\nnpm error Missing: @grpc/proto-loader@0.7.15 from lock file\nnpm error Invalid: lock file's long@5.3.2 does not satisfy long@4.0.0\nnpm error Missing: yargs@16.2.0 from lock file\nnpm error Missing: google-p12-pem@3.1.4 from lock file\nnpm error Invalid: lock file's agent-base@7.1.3 does not satisfy agent-base@6.0.2\nnpm error Missing: semver@5.7.2 from lock file\nnpm error Missing: @types/express@4.17.23 from lock file\nnpm error Invalid: lock file's @types/jsonwebtoken@9.0.10 does not satisfy @types/jsonwebtoken@8.5.9\nnpm error Invalid: lock file's jose@4.15.9 does not satisfy jose@2.0.7\nnpm error Missing: @panva/asn1.js@1.0.0 from lock file\nnpm error Missing: pump@3.0.3 from lock file\nnpm error Missing: crypto-random-string@2.0.0 from lock file\nnpm error Missing: long@5.3.2 from lock file\nnpm error Missing: protobufjs@7.5.3 from lock file\nnpm error Missing: cliui@7.0.4 from lock file\nnpm error Missing: string-width@4.2.3 from lock file\nnpm error Missing: yargs-parser@20.2.9 from lock file\nnpm error Missing: wrap-ansi@7.0.0 from lock file\nnpm error Missing: emoji-regex@8.0.0 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: is-typedarray@1.0.0 from lock file\nnpm error Missing: signal-exit@3.0.7 from lock file\nnpm error Missing: typedarray-to-buffer@3.1.5 from lock file\nnpm error Missing: yallist@4.0.0 from lock file\nnpm error Missing: @types/express-serve-static-core@4.19.6 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-06-30T08_29_32_858Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443.",
    "original": {
      "code": 3,
      "message": "Build failed with status: FAILURE and message: npm warn ERESOLVE overriding peer dependency\nnpm warn While resolving: functions@undefined\nnpm warn Found: firebase-admin@12.7.0\nnpm warn node_modules/firebase-admin\nnpm warn   firebase-admin@\"^10.0.2\" from the root project\nnpm warn   2 more (firebase-functions, firebase-functions-test)\nnpm warn\nnpm warn Could not resolve dependency:\nnpm warn peer firebase-admin@\"^11.10.0 || ^12.0.0 || ^13.0.0\" from firebase-functions@6.3.2\nnpm warn node_modules/firebase-functions\nnpm warn   firebase-functions@\"^3.18.0\" from the root project\nnpm warn   1 more (firebase-functions-test)\nnpm warn ERESOLVE overriding peer dependency\nnpm warn While resolving: functions@undefined\nnpm warn Found: firebase-functions@6.3.2\nnpm warn node_modules/firebase-functions\nnpm warn   firebase-functions@\"^3.18.0\" from the root project\nnpm warn   1 more (firebase-functions-test)\nnpm warn\nnpm warn Could not resolve dependency:\nnpm warn peer firebase-functions@\">=4.9.0\" from firebase-functions-test@3.4.1\nnpm warn node_modules/firebase-functions-test\nnpm warn   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@10.3.0\nnpm error Invalid: lock file's firebase-functions@6.3.2 does not satisfy firebase-functions@3.24.1\nnpm error Invalid: lock file's @fastify/busboy@3.1.1 does not satisfy @fastify/busboy@1.2.1\nnpm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@0.2.10\nnpm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@0.9.17\nnpm error Invalid: lock file's @google-cloud/firestore@7.11.2 does not satisfy @google-cloud/firestore@4.15.1\nnpm error Invalid: lock file's @google-cloud/storage@7.16.0 does not satisfy @google-cloud/storage@5.20.5\nnpm error Invalid: lock file's jsonwebtoken@9.0.2 does not satisfy jsonwebtoken@8.5.1\nnpm error Invalid: lock file's jwks-rsa@3.2.0 does not satisfy jwks-rsa@2.1.5\nnpm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2\nnpm error Missing: text-decoding@1.0.0 from lock file\nnpm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.5.21\nnpm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@0.13.10\nnpm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.3.4\nnpm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.7.3\nnpm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.1.7\nnpm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3\nnpm error Missing: @firebase/app-types@0.8.1 from lock file\nnpm error Invalid: lock file's google-gax@4.6.1 does not satisfy google-gax@2.30.5\nnpm error Invalid: lock file's protobufjs@7.5.3 does not satisfy protobufjs@6.11.4\nnpm error Invalid: lock file's @google-cloud/paginator@5.0.2 does not satisfy @google-cloud/paginator@3.0.7\nnpm error Invalid: lock file's @google-cloud/projectify@4.0.0 does not satisfy @google-cloud/projectify@2.1.1\nnpm error Invalid: lock file's @google-cloud/promisify@4.0.0 does not satisfy @google-cloud/promisify@2.0.4\nnpm error Missing: compressible@2.0.18 from lock file\nnpm error Missing: configstore@5.0.1 from lock file\nnpm error Missing: ent@2.2.2 from lock file\nnpm error Invalid: lock file's gaxios@6.7.1 does not satisfy gaxios@4.3.3\nnpm error Invalid: lock file's google-auth-library@9.15.1 does not satisfy google-auth-library@7.14.1\nnpm error Missing: hash-stream-validation@0.2.4 from lock file\nnpm error Missing: pumpify@2.0.1 from lock file\nnpm error Invalid: lock file's retry-request@7.0.2 does not satisfy retry-request@4.2.2\nnpm error Invalid: lock file's teeny-request@9.0.0 does not satisfy teeny-request@7.2.0\nnpm error Missing: xdg-basedir@4.0.0 from lock file\nnpm error Missing: dot-prop@5.3.0 from lock file\nnpm error Missing: make-dir@3.1.0 from lock file\nnpm error Missing: unique-string@2.0.0 from lock file\nnpm error Missing: write-file-atomic@3.0.3 from lock file\nnpm error Missing: is-obj@2.0.0 from lock file\nnpm error Missing: punycode@1.4.1 from lock file\nnpm error Invalid: lock file's @types/express@4.17.23 does not satisfy @types/express@4.17.3\nnpm error Invalid: lock file's @types/express-serve-static-core@4.19.6 does not satisfy @types/express-serve-static-core@5.0.6\nnpm error Invalid: lock file's https-proxy-agent@7.0.6 does not satisfy https-proxy-agent@5.0.1\nnpm error Missing: fast-text-encoding@1.0.6 from lock file\nnpm error Invalid: lock file's gcp-metadata@6.1.1 does not satisfy gcp-metadata@4.3.1\nnpm error Invalid: lock file's gtoken@7.1.0 does not satisfy gtoken@5.3.2\nnpm error Missing: lru-cache@6.0.0 from lock file\nnpm error Invalid: lock file's @grpc/grpc-js@1.13.4 does not satisfy @grpc/grpc-js@1.6.12\nnpm error Invalid: lock file's @grpc/proto-loader@0.7.15 does not satisfy @grpc/proto-loader@0.6.13\nnpm error Missing: is-stream-ended@0.1.4 from lock file\nnpm error Invalid: lock file's proto3-json-serializer@2.0.2 does not satisfy proto3-json-serializer@0.1.9\nnpm error Missing: protobufjs@6.11.3 from lock file\nnpm error Missing: @grpc/proto-loader@0.7.15 from lock file\nnpm error Invalid: lock file's long@5.3.2 does not satisfy long@4.0.0\nnpm error Missing: yargs@16.2.0 from lock file\nnpm error Missing: google-p12-pem@3.1.4 from lock file\nnpm error Invalid: lock file's agent-base@7.1.3 does not satisfy agent-base@6.0.2\nnpm error Missing: semver@5.7.2 from lock file\nnpm error Missing: @types/express@4.17.23 from lock file\nnpm error Invalid: lock file's @types/jsonwebtoken@9.0.10 does not satisfy @types/jsonwebtoken@8.5.9\nnpm error Invalid: lock file's jose@4.15.9 does not satisfy jose@2.0.7\nnpm error Missing: @panva/asn1.js@1.0.0 from lock file\nnpm error Missing: pump@3.0.3 from lock file\nnpm error Missing: crypto-random-string@2.0.0 from lock file\nnpm error Missing: long@5.3.2 from lock file\nnpm error Missing: protobufjs@7.5.3 from lock file\nnpm error Missing: cliui@7.0.4 from lock file\nnpm error Missing: string-width@4.2.3 from lock file\nnpm error Missing: yargs-parser@20.2.9 from lock file\nnpm error Missing: wrap-ansi@7.0.0 from lock file\nnpm error Missing: emoji-regex@8.0.0 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: is-typedarray@1.0.0 from lock file\nnpm error Missing: signal-exit@3.0.7 from lock file\nnpm error Missing: typedarray-to-buffer@3.1.5 from lock file\nnpm error Missing: yallist@4.0.0 from lock file\nnpm error Missing: @types/express-serve-static-core@4.19.6 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-06-30T08_29_32_858Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/2620ffc0-f5fb-4426-9284-0d8dc495a017?project=373583398443."
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-06-30T08:30:04.440Z] Error: Failed to update function callGemini in region us-central1
    at C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:399:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.updateV2Function (C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:388:32)
    at async Fabricator.updateEndpoint (C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:155:13)
    at async handle (C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2025-06-30T08:34:42.324Z] ----------------------------------------------------------------------
[debug] [2025-06-30T08:34:42.337Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-06-30T08:34:42.338Z] CLI Version:   14.9.0
[debug] [2025-06-30T08:34:42.338Z] Platform:      win32
[debug] [2025-06-30T08:34:42.338Z] Node Version:  v22.17.0
[debug] [2025-06-30T08:34:42.339Z] Time:          Mon Jun 30 2025 09:34:42 GMT+0100 (British Summer Time)
[debug] [2025-06-30T08:34:42.339Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-06-30T08:34:42.538Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-06-30T08:34:42.539Z] > authorizing via signed-in user (hello@yourpayroll.info)
[debug] [2025-06-30T08:34:42.539Z] [iam] checking project payroll-skills-platform for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-06-30T08:34:42.540Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:42.540Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:42.541Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions [none]
[debug] [2025-06-30T08:34:42.541Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions x-goog-quota-user=projects/payroll-skills-platform
[debug] [2025-06-30T08:34:42.541Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-06-30T08:34:42.995Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions 200
[debug] [2025-06-30T08:34:42.995Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-06-30T08:34:42.995Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:42.995Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:42.995Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-06-30T08:34:42.995Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-06-30T08:34:43.699Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-06-30T08:34:43.699Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/payroll-skills-platform/serviceAccounts/payroll-skills-platform@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'payroll-skills-platform'...
[info] 
[info] i  deploying functions 
[debug] [2025-06-30T08:34:43.704Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:43.704Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:43.705Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform [none]
[debug] [2025-06-30T08:34:43.908Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform 200
[debug] [2025-06-30T08:34:43.908Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform {"projectNumber":"373583398443","projectId":"payroll-skills-platform","lifecycleState":"ACTIVE","name":"payroll-skills-platform","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-06-29T08:15:30.773984Z","parent":{"type":"organization","id":"1097197121616"}}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-06-30T08:34:43.911Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:43.911Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:43.911Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/payroll-skills-platform/adminSdkConfig [none]
[debug] [2025-06-30T08:34:44.308Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/payroll-skills-platform/adminSdkConfig 200
[debug] [2025-06-30T08:34:44.308Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/payroll-skills-platform/adminSdkConfig {"projectId":"payroll-skills-platform","storageBucket":"payroll-skills-platform.firebasestorage.app"}
[debug] [2025-06-30T08:34:44.309Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:44.309Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:44.309Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs [none]
[debug] [2025-06-30T08:34:44.656Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs 200
[debug] [2025-06-30T08:34:44.656Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs {"configs":[{"name":"projects/payroll-skills-platform/configs/gemini"}]}
[debug] [2025-06-30T08:34:44.657Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:44.657Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:44.657Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables [none]
[debug] [2025-06-30T08:34:44.868Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables 200
[debug] [2025-06-30T08:34:44.868Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables {"variables":[{"name":"projects/payroll-skills-platform/configs/gemini/variables/key","updateTime":"2025-06-30T08:00:41.435880940Z"}]}
[debug] [2025-06-30T08:34:44.869Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:44.869Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:44.869Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables/key [none]
[debug] [2025-06-30T08:34:45.086Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables/key 200
[debug] [2025-06-30T08:34:45.086Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/payroll-skills-platform/configs/gemini/variables/key {"name":"projects/payroll-skills-platform/configs/gemini/variables/key","updateTime":"2025-06-30T08:00:41.435880940Z","text":"AIzaSyAas-F3EfJXljJKEERoQ2vQVt-XVDNLc70"}
[debug] [2025-06-30T08:34:45.089Z] Validating nodejs source
[debug] [2025-06-30T08:34:46.095Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.18.0",
    "node-fetch": "^2.6.7"
  },
  "devDependencies": {
    "@types/node-fetch": "^2.6.12",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^5.7.3"
  },
  "private": true
}
[debug] [2025-06-30T08:34:46.095Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-06-30T08:34:46.096Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-06-30T08:34:46.105Z] Found firebase-functions binary at 'C:\Users\kevin\Desktop\payroll-skills-app\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8783

[debug] [2025-06-30T08:34:46.888Z] Got response from /__/functions.yaml {"endpoints":{"callGemini":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"callGemini"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-06-30T08:34:50.934Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-06-30T08:34:50.934Z] > authorizing via signed-in user (hello@yourpayroll.info)
[debug] [2025-06-30T08:34:50.934Z] [iam] checking project payroll-skills-platform for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-06-30T08:34:50.934Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:50.934Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:50.934Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions [none]
[debug] [2025-06-30T08:34:50.934Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions x-goog-quota-user=projects/payroll-skills-platform
[debug] [2025-06-30T08:34:50.934Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-06-30T08:34:51.601Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions 200
[debug] [2025-06-30T08:34:51.601Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-06-30T08:34:51.601Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:51.601Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:51.601Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/payroll-skills-platform/instances pageSize=100&pageToken=
[debug] [2025-06-30T08:34:52.392Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/payroll-skills-platform/instances 200
[debug] [2025-06-30T08:34:52.392Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/payroll-skills-platform/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\kevin\Desktop\payroll-skills-app\functions (4.67 KB) for uploading 
[debug] [2025-06-30T08:34:52.427Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:52.427Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:52.427Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/payroll-skills-platform/locations/-/functions [none]
[debug] [2025-06-30T08:34:53.122Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/payroll-skills-platform/locations/-/functions 200
[debug] [2025-06-30T08:34:53.123Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/payroll-skills-platform/locations/-/functions {}
[debug] [2025-06-30T08:34:53.123Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:53.123Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:53.124Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-06-30T08:34:54.145Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/-/functions 200
[debug] [2025-06-30T08:34:54.146Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/-/functions {"functions":[{"name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"build":"projects/373583398443/locations/us-central1/builds/008b1256-58cc-4fba-aac9-10eab32bea30","runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"state":"UNKNOWN","updateTime":"2025-06-30T08:29:55.284336544Z","labels":{"firebase-functions-hash":"747da93b4fbac985b5428916e722d04bc1bdbdcd","deployment-tool":"cli-firebase","deployment-callable":"true"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","createTime":"2025-06-30T08:21:05.787102825Z","satisfiesPzi":true}]}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-06-30T08:34:54.150Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:54.150Z] Checked if tokens are valid: true, expires at: 1751273775133
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-06-30T08:34:54.150Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:54.151Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:54.151Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-06-30T08:34:54.151Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:34:54.151Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity {}
[debug] [2025-06-30T08:34:54.152Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-06-30T08:34:54.152Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/373583398443
[debug] [2025-06-30T08:34:54.152Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity {}
[debug] [2025-06-30T08:34:55.069Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-06-30T08:34:55.069Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-373583398443@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"100240653297361888704"}}
[debug] [2025-06-30T08:34:55.072Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-06-30T08:34:55.072Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/373583398443/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-373583398443@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"101977038765633758308"}}
[debug] [2025-06-30T08:34:55.075Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:55.075Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:55.075Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform [none]
[debug] [2025-06-30T08:34:55.235Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform 200
[debug] [2025-06-30T08:34:55.235Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/payroll-skills-platform {"projectNumber":"373583398443","projectId":"payroll-skills-platform","lifecycleState":"ACTIVE","name":"payroll-skills-platform","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-06-29T08:15:30.773984Z","parent":{"type":"organization","id":"1097197121616"}}
[debug] [2025-06-30T08:34:55.236Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:55.236Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:55.236Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/373583398443 [none]
[debug] [2025-06-30T08:34:55.498Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/373583398443 403
[debug] [2025-06-30T08:34:55.498Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/373583398443 {"error":{"code":403,"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443","consumer":"projects/373583398443","service":"compute.googleapis.com","containerInfo":"373583398443","serviceTitle":"Compute Engine API"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}]}]}}
[debug] [2025-06-30T08:34:55.499Z] unable to look up default compute service account. Falling back to 373583398443-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443","consumer":"projects/373583398443","service":"compute.googleapis.com","containerInfo":"373583398443","serviceTitle":"Compute Engine API"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/373583398443 had HTTP Error: 403, Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-06-30T08:34:55.499Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:55.499Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:55.499Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/373583398443 [none]
[debug] [2025-06-30T08:34:55.683Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/373583398443 403
[debug] [2025-06-30T08:34:55.683Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/373583398443 {"error":{"code":403,"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"373583398443","consumer":"projects/373583398443","serviceTitle":"Compute Engine API","service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}]}]}}
[debug] [2025-06-30T08:34:55.683Z] unable to look up default compute service account. Falling back to 373583398443-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"373583398443","consumer":"projects/373583398443","serviceTitle":"Compute Engine API","service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/373583398443 had HTTP Error: 403, Compute Engine API has not been used in project 373583398443 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=373583398443 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-06-30T08:34:55.685Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:55.685Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:55.686Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/payroll-skills-platform/billingInfo [none]
[debug] [2025-06-30T08:34:56.473Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/payroll-skills-platform/billingInfo 200
[debug] [2025-06-30T08:34:56.473Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/payroll-skills-platform/billingInfo {"name":"projects/payroll-skills-platform/billingInfo","projectId":"payroll-skills-platform","billingAccountName":"billingAccounts/0102CC-8EDDD1-3D89FE","billingEnabled":true}
[debug] [2025-06-30T08:34:56.475Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:56.475Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:56.475Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-06-30T08:34:57.278Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-06-30T08:34:57.279Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/5d937ccf-b7d1-4411-bb09-d20d36d43abf.zip?GoogleAccessId=service-373583398443@gcf-admin-robot.iam.gserviceaccount.com&Expires=1751274297&Signature=scG4AlDMlWOb%2FVHu4kjfvmQQQ7rL1AM7bmj0S8pvhtB0WMnqDaNazj1QYgslEurHJWz4GgdRfab3g6tAjWHHgm3ezM6lvmA4%2BDm%2BQ3QTVfSv%2FRMkp9qcGfMdBNwNSi58Vj8TcAnsSYBWZds98mDeNae%2FpEr9MLxywVIWAWmpxSamb4YaXzT8TfHy6e7SY%2FNlMtqE9OTQQrxn9sH6MfpGPCiRx3aOQ8qWidsctFYcYXTlV9e2ZuxYKoQmPkTbFFKRKAKmouAKzss%2B5EUctHm%2BcEgTHN0ZIXcvOceX2jRjWjfdwK5rIkTMaQ1O7ymDKCNSvjuWFyM6eUrFKOpxurYQAw%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com","object":"5d937ccf-b7d1-4411-bb09-d20d36d43abf.zip"}}
[debug] [2025-06-30T08:34:57.280Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/5d937ccf-b7d1-4411-bb09-d20d36d43abf.zip GoogleAccessId=service-373583398443%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1751274297&Signature=scG4AlDMlWOb%2FVHu4kjfvmQQQ7rL1AM7bmj0S8pvhtB0WMnqDaNazj1QYgslEurHJWz4GgdRfab3g6tAjWHHgm3ezM6lvmA4%2BDm%2BQ3QTVfSv%2FRMkp9qcGfMdBNwNSi58Vj8TcAnsSYBWZds98mDeNae%2FpEr9MLxywVIWAWmpxSamb4YaXzT8TfHy6e7SY%2FNlMtqE9OTQQrxn9sH6MfpGPCiRx3aOQ8qWidsctFYcYXTlV9e2ZuxYKoQmPkTbFFKRKAKmouAKzss%2B5EUctHm%2BcEgTHN0ZIXcvOceX2jRjWjfdwK5rIkTMaQ1O7ymDKCNSvjuWFyM6eUrFKOpxurYQAw%3D%3D
[debug] [2025-06-30T08:34:57.280Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/5d937ccf-b7d1-4411-bb09-d20d36d43abf.zip [stream]
[debug] [2025-06-30T08:34:57.580Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/5d937ccf-b7d1-4411-bb09-d20d36d43abf.zip 200
[debug] [2025-06-30T08:34:57.581Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com/5d937ccf-b7d1-4411-bb09-d20d36d43abf.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 22 (2nd Gen) function callGemini(us-central1)... 
[debug] [2025-06-30T08:34:57.586Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:57.586Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:57.587Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions/callGemini updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels
[debug] [2025-06-30T08:34:57.587Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions/callGemini {"name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-uploads-373583398443.us-central1.cloudfunctions.appspot.com","object":"5d937ccf-b7d1-4411-bb09-d20d36d43abf.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"128e1815f53abff95f384f25dd45f8bf2e0d8acb"}}
[debug] [2025-06-30T08:34:58.647Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions/callGemini 200
[debug] [2025-06-30T08:34:58.648Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/functions/callGemini {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:34:58.576483830Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-06-30T08:34:58.648Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:58.649Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:58.649Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a [none]
[debug] [2025-06-30T08:34:59.366Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a 200
[debug] [2025-06-30T08:34:59.366Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:34:58.576483830Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272498485202"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"deployment-callable":"true","firebase-functions-hash":"128e1815f53abff95f384f25dd45f8bf2e0d8acb"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2025-06-30T08:34:59.874Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:34:59.874Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:59.874Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:34:59.874Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a [none]
[debug] [2025-06-30T08:35:00.993Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a 200
[debug] [2025-06-30T08:35:00.994Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:34:58.576483830Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272498485202"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"deployment-callable":"true","firebase-functions-hash":"128e1815f53abff95f384f25dd45f8bf2e0d8acb"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5"},"done":false}
[debug] [2025-06-30T08:35:02.000Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:35:02.001Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:02.001Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:02.001Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a [none]
[debug] [2025-06-30T08:35:02.700Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a 200
[debug] [2025-06-30T08:35:02.701Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:34:58.576483830Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272498485202"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"deployment-callable":"true","firebase-functions-hash":"128e1815f53abff95f384f25dd45f8bf2e0d8acb"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5"},"done":false}
[debug] [2025-06-30T08:35:04.708Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:35:04.709Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:04.709Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:04.709Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a [none]
[debug] [2025-06-30T08:35:05.388Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a 200
[debug] [2025-06-30T08:35:05.388Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:34:58.576483830Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272498485202"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"deployment-callable":"true","firebase-functions-hash":"128e1815f53abff95f384f25dd45f8bf2e0d8acb"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5"},"done":false}
[debug] [2025-06-30T08:35:09.391Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:35:09.391Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:09.391Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:09.391Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a [none]
[debug] [2025-06-30T08:35:10.096Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a 200
[debug] [2025-06-30T08:35:10.096Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:34:58.576483830Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272498485202"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"deployment-callable":"true","firebase-functions-hash":"128e1815f53abff95f384f25dd45f8bf2e0d8acb"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5"},"done":false}
[debug] [2025-06-30T08:35:18.107Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:35:18.108Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:18.108Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:18.108Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a [none]
[debug] [2025-06-30T08:35:18.928Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a 200
[debug] [2025-06-30T08:35:18.928Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:34:58.576483830Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272498485202"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"deployment-callable":"true","firebase-functions-hash":"128e1815f53abff95f384f25dd45f8bf2e0d8acb"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5"},"done":false}
[debug] [2025-06-30T08:35:28.928Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:35:28.928Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:28.929Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:28.929Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a [none]
[debug] [2025-06-30T08:35:29.785Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a 200
[debug] [2025-06-30T08:35:29.786Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:34:58.576483830Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272498485202"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"deployment-callable":"true","firebase-functions-hash":"128e1815f53abff95f384f25dd45f8bf2e0d8acb"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5?project=373583398443"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/373583398443/locations/us-central1/builds/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5"},"done":false}
[debug] [2025-06-30T08:35:39.796Z] [update-default-us-central1-callGemini] Retrying task index 0
[debug] [2025-06-30T08:35:39.796Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:39.796Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:39.797Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a [none]
[debug] [2025-06-30T08:35:40.639Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a 200
[debug] [2025-06-30T08:35:40.640Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a {"name":"projects/payroll-skills-platform/locations/us-central1/operations/operation-1751272497852-638c5e723aeca-64ecf6dd-1dc6094a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-06-30T08:34:58.576483830Z","endTime":"2025-06-30T08:35:32.955771682Z","target":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/payroll-skills-platform/locations/us-central1/functions/callGemini","buildConfig":{"runtime":"nodejs22","entryPoint":"callGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751272498485202"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-373583398443-us-central1","object":"callGemini/function-source.zip","generation":"1751271665358833"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/payroll-skills-platform/serviceAccounts/373583398443-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/payroll-skills-platform/locations/us-central1/services/callgemini","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}","GCLOUD_PROJECT":"payroll-skills-platform","EVENTARC_CLOUD_EVENT_SOURCE":"projects/payroll-skills-platform/locations/us-central1/services/callGemini","FUNCTION_TARGET":"callGemini","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"373583398443-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"deployment-callable":"true","firebase-functions-hash":"128e1815f53abff95f384f25dd45f8bf2e0d8acb"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/payroll-skills-platform/locations/us-central1/services/callgemini for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-payroll-skills-platform.cloudfunctions.net/callGemini","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE and message: npm error code ERESOLVE\nnpm error ERESOLVE unable to resolve dependency tree\nnpm error\nnpm error While resolving: functions@undefined\nnpm error Found: firebase-functions@3.24.1\nnpm error node_modules/firebase-functions\nnpm error   firebase-functions@\"^3.18.0\" from the root project\nnpm error\nnpm error Could not resolve dependency:\nnpm error peer firebase-functions@\">=4.9.0\" from firebase-functions-test@3.4.1\nnpm error node_modules/firebase-functions-test\nnpm error   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm error\nnpm error Fix the upstream dependency conflict, or retry\nnpm error this command with --force or --legacy-peer-deps\nnpm error to accept an incorrect (and potentially broken) dependency resolution.\nnpm error\nnpm error\nnpm error For a full report see:\nnpm error /www-data-home/.npm/_logs/2025-06-30T08_35_19_517Z-eresolve-report.txt\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-06-30T08_35_19_517Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5?project=373583398443."}}
[debug] [2025-06-30T08:35:40.640Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE and message: npm error code ERESOLVE
npm error ERESOLVE unable to resolve dependency tree
npm error
npm error While resolving: functions@undefined
npm error Found: firebase-functions@3.24.1
npm error node_modules/firebase-functions
npm error   firebase-functions@"^3.18.0" from the root project
npm error
npm error Could not resolve dependency:
npm error peer firebase-functions@">=4.9.0" from firebase-functions-test@3.4.1
npm error node_modules/firebase-functions-test
npm error   dev firebase-functions-test@"^3.1.0" from the root project
npm error
npm error Fix the upstream dependency conflict, or retry
npm error this command with --force or --legacy-peer-deps
npm error to accept an incorrect (and potentially broken) dependency resolution.
npm error
npm error
npm error For a full report see:
npm error /www-data-home/.npm/_logs/2025-06-30T08_35_19_517Z-eresolve-report.txt
npm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-06-30T08_35_19_517Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5?project=373583398443.
[debug] [2025-06-30T08:35:40.642Z] Total Function Deployment time: 43055
[debug] [2025-06-30T08:35:40.642Z] 1 Functions Deployed
[debug] [2025-06-30T08:35:40.642Z] 1 Functions Errored
[debug] [2025-06-30T08:35:40.642Z] 0 Function Deployments Aborted
[debug] [2025-06-30T08:35:40.642Z] Average Function Deployment time: 43054
[info] 
[info] Functions deploy had errors with the following functions:
	callGemini(us-central1)
[debug] [2025-06-30T08:35:40.644Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:40.644Z] Checked if tokens are valid: true, expires at: 1751273775133
[debug] [2025-06-30T08:35:40.644Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-06-30T08:35:41.474Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-06-30T08:35:41.474Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts {"name":"projects/payroll-skills-platform/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-06-30T08:21:14.425590Z","updateTime":"2025-06-30T08:23:25.938915Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"95718033","vulnerabilityScanningConfig":{"lastEnableTime":"2025-06-30T08:21:05.990834050Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/payroll-skills-platform/gcf-artifacts"}
[debug] [2025-06-30T08:35:41.474Z] Functions deploy failed.
[debug] [2025-06-30T08:35:41.474Z] {
  "endpoint": {
    "id": "callGemini",
    "project": "payroll-skills-platform",
    "region": "us-central1",
    "entryPoint": "callGemini",
    "platform": "gcfv2",
    "runtime": "nodejs22",
    "callableTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"payroll-skills-platform\",\"storageBucket\":\"payroll-skills-platform.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "payroll-skills-platform",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/payroll-skills-platform/locations/us-central1/services/callGemini"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "128e1815f53abff95f384f25dd45f8bf2e0d8acb"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE and message: npm error code ERESOLVE\nnpm error ERESOLVE unable to resolve dependency tree\nnpm error\nnpm error While resolving: functions@undefined\nnpm error Found: firebase-functions@3.24.1\nnpm error node_modules/firebase-functions\nnpm error   firebase-functions@\"^3.18.0\" from the root project\nnpm error\nnpm error Could not resolve dependency:\nnpm error peer firebase-functions@\">=4.9.0\" from firebase-functions-test@3.4.1\nnpm error node_modules/firebase-functions-test\nnpm error   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm error\nnpm error Fix the upstream dependency conflict, or retry\nnpm error this command with --force or --legacy-peer-deps\nnpm error to accept an incorrect (and potentially broken) dependency resolution.\nnpm error\nnpm error\nnpm error For a full report see:\nnpm error /www-data-home/.npm/_logs/2025-06-30T08_35_19_517Z-eresolve-report.txt\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-06-30T08_35_19_517Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5?project=373583398443.",
    "original": {
      "code": 3,
      "message": "Build failed with status: FAILURE and message: npm error code ERESOLVE\nnpm error ERESOLVE unable to resolve dependency tree\nnpm error\nnpm error While resolving: functions@undefined\nnpm error Found: firebase-functions@3.24.1\nnpm error node_modules/firebase-functions\nnpm error   firebase-functions@\"^3.18.0\" from the root project\nnpm error\nnpm error Could not resolve dependency:\nnpm error peer firebase-functions@\">=4.9.0\" from firebase-functions-test@3.4.1\nnpm error node_modules/firebase-functions-test\nnpm error   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm error\nnpm error Fix the upstream dependency conflict, or retry\nnpm error this command with --force or --legacy-peer-deps\nnpm error to accept an incorrect (and potentially broken) dependency resolution.\nnpm error\nnpm error\nnpm error For a full report see:\nnpm error /www-data-home/.npm/_logs/2025-06-30T08_35_19_517Z-eresolve-report.txt\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-06-30T08_35_19_517Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/a3b2c33a-89c1-4564-9d0d-b433bd36c8b5?project=373583398443."
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-06-30T08:35:41.477Z] Error: Failed to update function callGemini in region us-central1
    at C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:399:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.updateV2Function (C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:388:32)
    at async Fabricator.updateEndpoint (C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:155:13)
    at async handle (C:\Users\kevin\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
